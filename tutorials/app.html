<!DOCTYPE HTML>
<!--
  Editorial by HTML5 UP
  html5up.net | @ajlkn
  Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
  <head>
    <title>Webapp Tutorial - ROB 102</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="../assets/css/main.css" />
    <link rel="shortcut icon" type="image/png" href="../images/mbot_overhead.png"/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/stackoverflow-light.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/highlight.min.js"></script>
  </head>
  <body class="is-preload">

    <!-- Wrapper -->
      <div id="wrapper">

        <!-- Main -->
          <div id="main">
            <div class="inner">

              <!-- Header -->
                <header id="header">
                  <a href="../index.html" class="logo"><strong>ROB 102:</strong> Introduction to AI and Programming</a>
                  <ul class="icons">
                    <li><a href="#" class="icon brands fa-slack"><span class="label">Slack</span></a></li>
                    <li><a href="#" class="icon brands fa-github"><span class="label">Github</span></a></li>
                  </ul>
                </header>

              <!-- Content -->
                <section>
                  <header class="main project">
                    <strong>Tutorial:</strong> Using the ROB 102 Path Planning Webapp
                  </header>

                  <p>Before you start, make sure you have followed the <a href="setup.html">Setup Instructions</a>. You will need to have VSCode, Docker and Git installed (if using Windows, you will also need Git Bash) in order to complete this tutorial.</p>

                  <h2>Getting the code</h2>

                  <p>We will use Github to manage our code. A Github tutorial is available <a href="git.html">here</a>.</p>

                  <p>The code you write for Projects 2 and 3 will be stored in a repository on your own Github account. To create this repository, we will use a <emph>Github Template</emph>. Navigate to the template code <a href="https://github.com/janapavlasek/rob102-path-planning-template">here</a>. Click on the green <b>Use this template</b> button:</p>

                  <span class="image main"><img src="../images/webapp/git-template.png" alt="" style="max-width:800px;"/></span>

                  <p>You will see a screen like the one below. Pick a name for your repository, and <b>make sure it is set to private</b>. Storing your assignment solutions in a public repository is a violation of the honor code. You can leave the option to include all branches unchecked.</p>

                  <span class="image main"><img src="../images/webapp/git-create-project.png" alt="" style="max-width:800px;"/></span>

                  <p>Next, you will give the instructors access to your code. In your new repository, go to &quot;Settings&quot; &gt; &quot;Manage Access&quot; and click &quot;Invite a collaborator&quot;. Add Prof. Jenkins and Jana using their usernames, <code>ohseejay</code> and <code>janapavlasek</code>.</p>

                  <span class="image main"><img src="../images/webapp/git-collab.png" alt="" style="max-width:800px;"/></span>

                  <p>Finally, we're ready to clone the repository! Open a terminal (on Mac, click the Launchpad, search for &quot;Terminal&quot;and select the terminal program. On Windows, open Git Bash). Use the <code>cd</code> command to navigate to the folder where you would like to keep your code. Clone your repo using:</p>
                  <pre><code class="language-bash">git clone --recurse-submodules &lt;ADDRESS&gt;</code></code></pre>
                  <p>Substitute the address to your repo, which you can copy using the clipboard button.</p>

                  <span class="image main"><img src="../images/webapp/git-clone.png" alt="" style="max-width:800px;"/></span>

                  <hr class="major" />

                  <h2>Starting the app</h2>

                  <p>For Projects 2 and 3, you will be running your code in a Docker container. The web app will run in the same Docker container. The Docker image includes all the dependencies you need to write your code and run the app, so you only need to have Docker installed to get started.</p>

                  <p>Open VSCode, and open the directory that you cloned using &quot;File&quot; &gt; &quot;Open Folder...&quot;. Navigate to where you cloned your repository, and select it. You should see your folder and all the files it contains the VSCode's Explorer <span><img src="https://raw.githubusercontent.com/microsoft/vscode-icons/master/icons/light/files.svg?sanitize=true"></span>. Open a terminal using &quot;Terminal&quot; &gt; &quot;New Terminal&quot;. The terminal should open in the root of your code directory. If you are using Windows, make sure you are using a Bash terminal (the <a href="setup.html#install_vscode">VSCode setup instructions</a> explained to how make Bash your default terminal). Now, build the Docker image with the script provided:</p>
                  <pre><code class="language-bash">./docker_build.sh</code></pre>

                  <ul class="hint">
                    <li class="icon solid fa-cogs"><strong>Hint:</strong> If you see an error that says <code>E: Release file for &lt;ADDRESS&gt; is not valid yet [...]</code> when building the image, your system clock might be mismatched with Docker's clock. Try restarting Docker, and if that doesn't work, restart your computer.</li>
                  </ul>

                  <p>To run the Docker container, do:</p>
                  <pre><code class="language-bash">./docker_run.sh</code></pre>

                  <p>You should see a container called <code>rob102_planning</code> running under &quot;Docker Containers&quot; in VSCode's Explorer, if you have installed the Docker extensions for VSCode.</p>

                  <hr class="major" />

                  <h2>Using the webapp</h2>

                  <p>When Docker is running, you should see the app, as shown below, when you navigate to <a href="http://localhost:8000">http://localhost:8000</a> in your browser.</p>

                  <span class="image main"><img src="../images/webapp.png" alt="" style="max-width:600px;"/></span>

                  <p>The webapp has the following features:</p>
                  <ul>
                    <li><strong>Upload a map:</strong> Use the &quot;Choose File&quot; button to navigate to a map file. The app supports any file with the <code>.map</code> extension, but the C++ server only supports the ones in the <code>data</code> folder in the code template. Make sure you pick a file with the <code>.map</code> extension, not an image. The <b>Upload Map</b> button loads the map for visualization. If the C++ server is connected, it also sends the map to the server, which will load the map and call potential field functions.</li>
                    <li><strong>Algorithm selection:</strong> Use the dropdown menu to select the algorithm you would like to use for path planning. If the code for that algorithm isn't implemented, no path will be planned.</li>
                    <li><strong>Plan a path:</strong> The <b>Plan!</b> button calls your path planning functions for the chosen algorithm. You can set the goal location by clicking on the map, which will turn that cell yellow. You can drag the robot to change the start location. When you click on <b>Plan!</b> the goal cell will turn green if it is valid and your path planning function will be triggered. If the goal is not valid, the cell will turn red. The <b>Plan!</b> button only works if a map is loaded, a valid goal is selected, and the backend is connected. Otherwise, it won't do anything.</li>
                  </ul>

                  <hr class="major" />

                  <h2 id="write_code">Writing the code</h2>

                  <p>You will be writing code in the <code>rob102-path-planning/path_planning</code> directory. This directory is <emph>mounted</emph> in the Docker container. When you modify the files in VSCode from your computer, those changes will be reflected in the Docker container as well.</p>

                  <p>You will compile and execute your code in the Docker container. To do this, you will open a terminal inside the container. Right-click on the running docker image under &quot;Docker Containers&quot; in VSCode and select &quot;Execute in bash.&quot; This will open up a terminal which you can use to interact with the container.
                  </p>

                  <span class="image main"><img src="../images/webapp/docker-execute.png" alt="" style="max-width:400px;"/></span>

                  <p></p>To compile the code, first enter into the <code>build</code> directory for this project, where we will be storing all the binaries and build files:</p>
                  <pre><code class="language-bash">cd /code/build</code></pre>

                  <p>To compile the code, we will use CMake, which will help find the dependencies and link them to our code during compilation. This is a two step process:</p>
                  <pre><code class="language-bash">cmake ..
make</code></pre>
                  <p>The <code>cmake</code> command sets up our project for compilation by finding all the libraries and compilers we need. The argument <code>..</code> points to the directory one folder back from the current folder (in this case, <code>/code</code>), where the file <code>CMakeLists.txt</code> is stored. This gives CMake instructions about how to compile the code. The <code>make</code> command performs the compilation. Generally, you only have to run <code>cmake</code> once. The <code>make</code> command needs to be rerun every time you modify the code.</p>

                  <p>We have provided code in <code>server.cpp</code> which communicates with the app and calls the functions that you will be writing in Projects 2 and 3. It opens up a websocket that connects to the app. When you upload a map and send a planning goal, the server will load the map and call the planning functions for you. When the plan is found, the server will send the plan to the app to display. To run the server, in the Docker container, within the <code>build</code> directory, do:</p>
                  <pre><code>./path_planning/path_planning_server</code></pre>
                  <p>You should see a message when the connection is open, and the status message on the app should turn green and say &quot;Connected.&quot; Right now, we haven't written any code so the app won't do much. You are now ready to complete <a href="../projects/a2.html">Project 2</a> and <a href="../projects/a3.html">Project 3</a>!</p>

                </section>

            </div>
          </div>

        <!-- Sidebar -->
          <div id="sidebar">
            <div class="inner">

              <!-- Menu -->
                <nav id="menu">
                  <header class="major">
                    <h2>Menu</h2>
                  </header>
                  <ul>
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../index.html#sec_syllabus">Syllabus</a></li>
                    <li><a href="../index.html#sec_schedule">Schedule</a></li>
                    <li><a href="../index.html#sec_course_staff">Course Staff</a></li>
                    <li>
                      <span class="opener">Projects</span>
                      <ul>
                        <li><a href="../projects/a0.html">Project 0: Introduction</a></li>
                        <li><a href="../projects/a1.html">Project 1: Wall Following</a></li>
                        <li><a href="../projects/a2.html">Project 2: Potential Field Control</a></li>
                        <li><a href="../projects/a3.html">Project 3: Path Planning</a></li>
                        <li><a href="../projects/a4.html">Project 4: Machine Learning</a></li>
                      </ul>
                    </li>
                    <li>
                      <span class="opener active">Tutorials</span>
                      <ul>
                        <li><a href="setup.html">Computer Setup</a></li>
                        <li><a href="git.html">Github</a></li>
                        <li><a href="app.html">Using the Webapp</a></li>
                      </ul>
                    </li>
                    <li><a href="../elements.html">Elements</a></li>
                  </ul>
                </nav>

              <!-- Section -->
                <section>
                  <header class="major">
                    <h2>Course Times</h2>
                  </header>
                  <p>Lectures, labs and office hours.</p>
                  <ul class="contact">
                    <li class="icon solid fa-chalkboard-teacher">MW 9-11 AM</li>
                    <li class="icon solid fa-vials">MW 1-3 PM</li>
                    <li class="icon solid fa-users">TuTh 1-2 PM</li>
                  </ul>
                </section>

              <!-- Footer -->
                <footer id="footer">
                  <p class="copyright">&copy; Untitled. All rights reserved. Demo Images: <a href="https://unsplash.com">Unsplash</a>. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
                </footer>

            </div>
          </div>

      </div>

    <!-- Scripts -->
      <script src="../assets/js/jquery.min.js"></script>
      <script src="../assets/js/browser.min.js"></script>
      <script src="../assets/js/breakpoints.min.js"></script>
      <script src="../assets/js/util.js"></script>
      <script src="../assets/js/main.js"></script>
      <script>hljs.highlightAll();</script>

  </body>
</html>
